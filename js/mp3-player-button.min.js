function BasicMP3Player(){var b=this,c=this,f=soundManager,h=navigator.userAgent.match(/ipad|iphone/i),k=navigator.userAgent.match(/msie/i);this.excludeClass="button-exclude";this.links=[];this.sounds=[];this.soundsByURL={};this.indexByURL={};this.lastSound=null;this.soundCount=0;this.config={playNext:!1,autoPlay:!1};this.css={sDefault:"sm2_button",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.includeClass=this.css.sDefault;this.addEventHandler="undefined"!==typeof window.addEventListener?
function(a,b,e){return a.addEventListener(b,e,!1)}:function(a,b,e){a.attachEvent("on"+b,e)};this.removeEventHandler="undefined"!==typeof window.removeEventListener?function(a,b,e){return a.removeEventListener(b,e,!1)}:function(a,b,e){return a.detachEvent("on"+b,e)};this.classContains=function(a,b){return"undefined"!==typeof a.className?a.className.match(RegExp("(\\s|^)"+b+"(\\s|$)")):!1};this.addClass=function(a,d){if(!a||!d||b.classContains(a,d))return!1;a.className=(a.className?a.className+" ":
"")+d};this.removeClass=function(a,d){if(!a||!d||!b.classContains(a,d))return!1;a.className=a.className.replace(RegExp("( "+d+")|("+d+")","g"),"")};this.getSoundByURL=function(a){return"undefined"!==typeof b.soundsByURL[a]?b.soundsByURL[a]:null};this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!==b);return a.nodeName.toLowerCase()===b?a:null};this.events={play:function(){c.removeClass(this._data.oLink,
this._data.className);this._data.className=c.css.sPlaying;c.addClass(this._data.oLink,this._data.className)},stop:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=""},pause:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPaused;c.addClass(this._data.oLink,this._data.className)},resume:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPlaying;c.addClass(this._data.oLink,this._data.className)},
finish:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className="";if(c.config.playNext){var a=c.indexByURL[this._data.oLink.href]+1;a<c.links.length&&c.handleClick({target:c.links[a]})}}};this.stopEvent=function(a){"undefined"!==typeof a&&"undefined"!==typeof a.preventDefault?a.preventDefault():"undefined"!==typeof window.event&&(window.event.returnValue=!1);return!1};this.getTheDamnLink=k?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target};
this.handleClick=function(a){if("undefined"!==typeof a.button&&1<a.button)return!0;var d=b.getTheDamnLink(a),e,c;if("a"!==d.nodeName.toLowerCase()&&(d=b.isChildOfNode(d,"a"),!d))return!0;d.getAttribute("href");if(!d.href||(!soundManager.canPlayLink(d)||b.classContains(d,b.excludeClass))||!b.classContains(d,b.includeClass))return!0;f._writeDebug("handleClick()");e=d.href;(c=b.getSoundByURL(e))?c===b.lastSound?c.togglePause():(c.togglePause(),f._writeDebug("sound different than last sound: "+b.lastSound.id),
b.lastSound&&b.stopSound(b.lastSound)):(c=f.createSound({id:"basicMP3Sound"+b.soundCount++,url:e,onplay:b.events.play,onstop:b.events.stop,onpause:b.events.pause,onresume:b.events.resume,onfinish:b.events.finish,type:d.type||null}),c._data={oLink:d,className:b.css.sPlaying},b.soundsByURL[e]=c,b.sounds.push(c),b.lastSound&&b.stopSound(b.lastSound),c.play());b.lastSound=c;return b.stopEvent(a)};this.stopSound=function(a){soundManager.stop(a.id);h||soundManager.unload(a.id)};this.init=function(){f._writeDebug("basicMP3Player.init()");
var a,c,e=0,g=document.getElementsByTagName("a");a=0;for(c=g.length;a<c;a++)b.classContains(g[a],b.css.sDefault)&&!b.classContains(g[a],b.excludeClass)&&(b.links[e]=g[a],b.indexByURL[g[a].href]=e,e++);0<e&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}}));f._writeDebug("basicMP3Player.init(): Found "+e+" relevant items.")};this.init()}var basicMP3Player=null;
soundManager.setup({preferFlash:!1,onready:function(){basicMP3Player=new BasicMP3Player}});
